#!/usr/bin/env node

const path = require('path');
const program = require('commander');
const mese = require('..');
const constants = require('../lib/constants');
const getConfig = require('../lib/webpack.config');

program
  .option('-d, --development', '开发模式')
  .parse(process.argv);

const cwd = process.cwd();
const mode = program.development ? 'development' : 'production';
const meseUrl = path.join(cwd, constants.mese);
const outputPath = path.join(cwd, constants.dist);
const config = getConfig({ mode, meseUrl, outputPath });
mese.build(config);